<!DOCTYPE html>
<html>
  <body>
    <div id="demo">
      <h2>Fetch API Client - POST Request</h2>
      <button
        type="button"
        onclick="fetchPost('https://jsonplaceholder.typicode.com/posts', processResponse)"
      >
        Create Post
      </button>
    </div>
    <br />
    <div id="output"></div>

    <script>
      function fetchPost(url, callback) {
        const postData = {
          title: "foo",
          body: "bar",
          userId: 1,
        };
        fetch(url, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            // 'Authorization': 'Bearer <token>' // Uncomment and set token if needed
          },
          body: JSON.stringify(postData),
        })
          .then((response) => {
            console.log(`StatusCode: ${response.status}`);
            if (response.status !== 201) {
              throw new Error("Network response was not ok");
            }
            return response.json();
          })
          .then((data) => {
            callback(data);
          })
          .catch((error) => {
            document.getElementById("output").innerHTML = "Error: " + error;
          });
      }

      function processResponse(data) {
        document.getElementById("output").innerHTML = JSON.stringify(data);
      }
    </script>
  </body>
</html>
